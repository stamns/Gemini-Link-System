version: '3.8'  # 使用较新的Compose文件版本，兼容性更好

services:
  gemini-link-system:
    image: qxdljy/gemini-link-system:latest  # 指定使用的镜像
    container_name: gemini-link-system       # 容器名称，与原命令一致
    ports:
      - "8000:5000"                          # 端口映射，宿主机8000映射到容器5000
    environment:                             # 环境变量配置
      - HTTP_PROXY=http://host.docker.internal:7890
      - HTTPS_PROXY=http://host.docker.internal:7890
      - ALL_PROXY=http://host.docker.internal:7890
      - PROXY=http://host.docker.internal:7890
      - no_proxy=localhost,127.0.0.1,host.docker.internal,172.17.0.0/16
    volumes:                                 # 数据卷挂载
      - D:/geminibusiness/.env:/app/.env
      - D:/geminibusiness/geminibusiness.db:/app/geminibusiness.db
      - D:/geminibusiness/generated_images:/app/generated_images
    restart: unless-stopped                  # 可选：容器退出时自动重启（除非手动停止）
    networks:
      - default

# 可选：如果需要自定义网络，可在这里定义（默认网络已足够）
networks:
  default:
    driver: bridge